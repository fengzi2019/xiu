console.log("Last modification time: 2019-5-3 13:54:52"),function(e){function t(t){for(var o,a,c=t[0],u=t[1],d=t[2],l=0,v=[];l<c.length;l++)a=c[l],i[a]&&v.push(i[a][0]),i[a]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);for(s&&s(t);v.length;)v.shift()();return r.push.apply(r,d||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,c=1;c<n.length;c++){var u=n[c];0!==i[u]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={4:0},r=[];function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="./";var c=window.webpackJsonp=window.webpackJsonp||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var s=u;r.push([36,0]),n()}({10:function(e,t,n){},14:function(e,t,n){"use strict";Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,o=new Array(n);n--;)o[n]=[t[n],e[t[n]]];return o})},2:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return r});var o={"120p,120p_1":[160,120,15,65],"240p_1":[320,240,15,200],"360p_4":[640,360,30,600],"480p_4":[640,480,30,750],"720p_3":[1280,720,30,1710],"1080p_5":[1920,1080,60,4780]},i=1,r="93d12c81e657400f8946294d00f18854"},36:function(e,t,n){"use strict";n.r(t);n(15);var o=n(0),i=n.n(o),r=(n(37),n(3)),a=(n(8),n(14),n(5)),c=n(2),u=(n(10),n(39),void 0),d=void 0,s=void 0,l=void 0,v=void 0,f=String(Number.parseInt((new Date).getTime(),10)+Math.floor(1e3*Math.random())),p={DURATION:10,volume:0,volumeBar:i()("#volume"),targetStream:{},getVolume:function(e){var t=Math.round(100*e.getAudioLevel());return isNaN(t)?0:t},scheduleVolumeDetect:{},scheduleEnd:{},start:function(){var e=this;this.targetStream?(i()(".ag-connect-test").prepend('<div id="testDuration"></div>'),this.scheduleVolumeDetect=setInterval(function(){e.volume=e.getVolume(e.targetStream),e.volumeBar.val(e.volume)},100),this.scheduleEnd=setTimeout(function(){i()("#testDuration").attr("style","animation-play-state:paused;background-color:#7ED321"),clearInterval(e.scheduleVolumeDetect),e.targetStream.getStats(function(t){var n=[t.videoReceiveBytes,t.audioReceiveBytes,t.videoReceivePackets,t.audioReceivePackets,t.videoReceivePacketsLost,t.audioReceivePacketsLost],o=n[1],r=n[2],a=n[3],c=n[4],u=n[5],d=(n[0]/1e3/e.DURATION).toFixed(2)+"KB/s",s=(o/1e3/e.DURATION).toFixed(2)+"KB/s",l=(c/r*100).toFixed(2)+"%",v=(u/a*100).toFixed(2)+"%",f=(c/r*100+u/a*100).toFixed(2),p=i()("#videoCard .ag-card-body"),m=i()("#audioCard .ag-card-body"),h='\n          <div class="ag-test-result">\n            <p>Video Bitrate: '+d+"</p>\n            <p>Packet Loss: "+l+"</p>\n          </div>\n        ",g='\n          <div class="ag-test-result">\n            <p>Audio Bitrate: '+s+"</p>\n            <p>Packet Loss: "+v+"</p>\n          </div>\n        ",b=void 0;b=f<1?"Excellent":f<5?"Good":f<10?"Poor":f<100?"Bad":"Get media failed.",p.find(".initial").hide(),p.find(".result").html(h),m.find(".initial").hide(),m.find(".result").html(g),i()("#testDuration").empty().after('<span style="">'+b+"</span>")}),i()("#stepTwo").addClass("active"),i()("#stepOne").removeClass("active")},1e3*this.DURATION)):console.error("Please init Schedule with a targetStream!")},reset:function(){i()("#testDuration").remove(),this.volume=0,this.volumeBar.val(0),this.scheduleVolumeDetect&&clearInterval(this.scheduleVolumeDetect),this.scheduleEnd&&clearTimeout(this.scheduleEnd),this.targetStream=null},init:function(e,t){this.targetStream=e,this.DURATION=t}},m=function(){if(!u)throw Error("Stream not existed!");return new Promise(function(e,t){var n=u.getId();s.unpublish(u),u.stop(),u.close();var o={streamID:n,audio:!0,video:!0,screen:!1,cameraId:i()("#videoDevice").val(),microphoneId:i()("#audioDevice").val()};(u=AgoraRTC.createStream(o)).setVideoProfile(r.get("videoProfile").split(",")[0]||"480p_4"),u.init(function(){i()("#enableVideo").prop("checked")||u.disableVideo(),s.publish(u),e()},function(e){console.log("getUserMedia failed",e),t(e)})})};new Promise(function(e){var t=c.b[r.get("videoProfile")],n=r.get("transcode")||"h264",o=function(){switch(n){case"":return"VP8";default:case"vp8":return"VP8";case"h264":return"H264"}}(),u={videoProfile:t[0]+"x"+t[1]+" "+t[2]+"fps "+t[3]+"kbps",channel:r.get("channel")||"test",transcode:o,attendeeMode:r.get("attendeeMode")||"video",baseMode:r.get("baseMode")||"avc"};v=c.a,Object.entries(u).map(function(e){return i()("#"+e[0]).html(e[1])}),"video"===u.attendeeMode&&i()("#enableVideo").prop("checked",!0),AgoraRTC.checkSystemRequirements()?i()("#compatibility").html("AgoraRTC supported."):i()("#compatibility").html("AgoraRTC not fully supported and some functions may be lost."),Object(a.d)()?(i()("#audioDevice").parent().remove(),i()("#videoDevice").parent().remove(),e()):AgoraRTC.getDevices(function(t){var n="",o="";t.forEach(function(e){"audioinput"===e.kind&&(o+="<option value="+e.deviceId+">"+e.label+"</option>"),"videoinput"===e.kind&&(n+="<option value="+e.deviceId+">"+e.label+"</option>")}),i()("#videoDevice").html(n),i()("#audioDevice").html(o),e()})}).then(function(){i()("#quickJoinBtn").on("click",function(){r.set("cameraId",i()("#videoDevice").val()),r.set("microphoneId",i()("#audioDevice").val());try{s&&s.unpublish(u),u&&u.close(),s&&s.leave(function(){console.log("Client succeed to leave.")},function(){console.log("Client failed to leave.")})}finally{window.location.href="live.html"}}),i()("#videoDevice").change(function(e){p.reset(),m()}),i()("#audioDevice").change(function(e){p.reset(),m()}),i()("#enableVideo").change(function(e){i()("#enableVideo").prop("checked")?u.enableVideo():u.disableVideo()}),new Promise(function(e,t){(s=AgoraRTC.createClient({mode:"live",codec:r.get("transcode")||"h264"})).init(v,function(){s.join(v,f,void 0,function(n){var o={streamID:n,audio:!0,video:!0,screen:!1,cameraId:i()("#videoDevice").val(),microphoneId:i()("#audioDevice").val()};(u=AgoraRTC.createStream(o)).setVideoProfile(r.get("videoProfile").split(",")[0]||"480p_4"),u.init(function(){s.publish(u),i()("#enableVideo").prop("checked")||u.disableVideo(),e()},function(e){console.log("getUserMedia failed",e),t(e)})})})}),new Promise(function(e,t){(l=AgoraRTC.createClient({mode:"live",codec:r.get("transcode")||"h264"})).on("stream-added",function(e){var t=e.stream;l.subscribe(t,function(e){console.log("Subscribe stream failed",e)})}),l.on("stream-subscribed",function(e){d&&d.stop(),p.reset(),d=e.stream,p.init(d,10),d.play("videoItem"),p.start()}),l.on("peer-leave",function(e){i()("#videoItem").empty()}),l.on("stream-removed",function(e){i()("#videoItem").empty()}),l.init(v,function(){l.join(v,f,void 0,function(t){e(t)},function(e){t(e)})})})})},39:function(e,t,n){},5:function(e,t,n){"use strict";n.d(t,"d",function(){return o}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a});var o=function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},i=function(){return window.innerWidth<=800&&window.innerHeight<=830},r=function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},a=function(){return"undefined"!=typeof InstallTrigger}},8:function(e,t,n){}});